/* Add padding-top for mobile content to account for the topbar */
@media (max-width: 767px) {
  body {
    padding-top: 0; /* Remove default padding */
    @apply overflow-x-hidden;
  }
  
  /* Improve touch targets for mobile */
  button, a, [role="button"] {
    @apply min-h-[44px] min-w-[44px];
  }

  input, select, textarea {
    @apply text-base py-3 min-h-[44px];
  }
  
  /* Fix popovers and dropdowns on mobile - less restrictive positioning */
  .popover-content, .dropdown-content {
    @apply max-w-[calc(100vw-24px)] !important;
  }
  
  /* Improve dropdown positioning without overriding Radix UI positioning logic */
  [data-radix-popper-content-wrapper] {
    /* Remove conflicting transform properties and fixed positioning */
    z-index: 999 !important; /* Ensure dropdowns appear above other content */
    max-width: 100% !important;
  }
  
  /* Ensure consistent spacing between trigger and dropdown */
  [data-radix-popover-content] {
    margin-top: 5px !important;
  }
  
  [data-radix-select-content] {
    margin-top: 5px !important;
  }
  
  /* Properly space content below the fixed mobile topbar */
  .pt-topbar {
    padding-top: 54px; /* Updated to match topbar height */
  }
  
  /* Prevent double scrollbars */
  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Ensure dropdown lists always appear below their triggers */
  [role="listbox"],
  [role="menu"] {
    top: 100% !important;
    bottom: auto !important;
  }
  
  /* Improve modal positioning on mobile */
  [role="dialog"] {
    max-height: 90vh;
    margin-top: 5vh;
  }

  /* Style for the connect wallet button on mobile */
  .wallet-button-mobile {
    @apply py-2.5 px-5 text-sm min-h-[40px];
  }
  
  /* Adjust header height in mobile menu */
  .mobile-menu {
    @apply pt-[54px];
  }
  
  /* Improve onramp page layout for mobile */
  .onramp-container {
    @apply flex-col !important;
  }
  
  /* Center align mobile content */
  .mobile-centered {
    @apply flex items-center justify-center;
  }
  
  /* Adjust form spacing on mobile */
  .mobile-stacked-form > * {
    @apply mb-4 w-full;
  }
  
  /* Mobile menu styles */
  [data-radix-dialog-content] {
    z-index: 50 !important;
  }
  
  /* Ensure sheet content is always on top */
  [data-radix-dialog-overlay] {
    z-index: 40 !important;
    background-color: rgba(0, 0, 0, 0.7) !important;
  }
  
  /* Style for menu properly aligned with topbar */
  [data-radix-dialog-content][data-side="right"] {
    height: calc(100vh - 54px) !important;
    top: 54px !important; 
    margin-top: 0 !important;
    padding-top: 0 !important;
    border-top: none !important;
  }
  
  /* Ensure menu items have proper contrast */
  .mobile-menu-item {
    @apply min-h-[44px] flex items-center py-3 px-4;
  }
  
  /* Active menu item styling */
  .mobile-menu-item-active {
    @apply bg-[#AF9EF9] text-black rounded-lg;
  }
  
  /* Ensure sheet animations work properly - slide from right animation */
  [data-state=open].sheet-content {
    animation: slide-in-from-right 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  [data-state=closed].sheet-content {
    animation: slide-out-to-right 300ms cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  @keyframes slide-in-from-right {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  @keyframes slide-out-to-right {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(100%);
    }
  }
  
  /* Remove default close button from sheet */
  [data-radix-dialog-content] [data-radix-dialog-close] {
    display: none !important;
  }
}

/* Extra small screen optimizations */
@media (max-width: 374px) {
  .text-xs {
    font-size: 0.7rem;
  }
  
  .text-sm {
    font-size: 0.8rem;
  }
  
  .p-4 {
    padding: 0.75rem;
  }
  
  .px-4 {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  /* Make buttons more compact on very small screens */
  .btn-sm, button.text-xs {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  /* Reduce container padding */
  .container {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
  
  /* Improve dropdown positioning on small screens */
  [data-radix-popper-content-wrapper] {
    max-width: 100% !important;
    width: var(--radix-select-trigger-width) !important;
    left: 0 !important;
  }
}

/* Half-screen desktop optimization - new breakpoint */
@media (min-width: 768px) and (max-width: 1279px) {
  /* Optimize layout for half-screen desktop views */
  .half-screen-optimize {
    @apply flex-col !important;
  }
  
  /* Reduce side padding for content containers */
  .content-container {
    @apply px-4 !important;
  }
  
  /* Ensure table containers allow horizontal scrolling */
  .table-container {
    @apply w-full overflow-x-auto;
  }
  
  /* Make sure dropdowns appear in correct position */
  [data-radix-popper-content-wrapper] {
    max-width: 100% !important;
    width: var(--radix-select-trigger-width) !important;
  }
  
  /* Ensure consistent dropdown widths */
  [data-radix-popover-content],
  [data-radix-select-content] {
    width: var(--radix-popover-trigger-width, 100%) !important;
    min-width: var(--radix-popover-trigger-width, 100%) !important;
    max-width: var(--radix-popover-trigger-width, 100%) !important;
  }
}
